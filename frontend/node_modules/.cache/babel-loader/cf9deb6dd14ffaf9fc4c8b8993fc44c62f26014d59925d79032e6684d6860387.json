{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClientRequestInterceptor = void 0;\nvar http_1 = __importDefault(require(\"http\"));\nvar https_1 = __importDefault(require(\"https\"));\nvar outvariant_1 = require(\"outvariant\");\nvar glossary_1 = require(\"../../glossary\");\nvar Interceptor_1 = require(\"../../Interceptor\");\nvar http_get_1 = require(\"./http.get\");\nvar http_request_1 = require(\"./http.request\");\n/**\n * Intercept requests made via the `ClientRequest` class.\n * Such requests include `http.get`, `https.request`, etc.\n */\nvar ClientRequestInterceptor = /** @class */function (_super) {\n  __extends(ClientRequestInterceptor, _super);\n  function ClientRequestInterceptor() {\n    var _this = _super.call(this, ClientRequestInterceptor.symbol) || this;\n    _this.modules = new Map();\n    _this.modules.set('http', http_1.default);\n    _this.modules.set('https', https_1.default);\n    return _this;\n  }\n  ClientRequestInterceptor.prototype.setup = function () {\n    var e_1, _a;\n    var log = this.log.extend('setup');\n    var _loop_1 = function (protocol, requestModule) {\n      var pureRequest = requestModule.request,\n        pureGet = requestModule.get;\n      outvariant_1.invariant(!requestModule[glossary_1.IS_PATCHED_MODULE], 'Failed to patch the \"%s\" module: already patched.', protocol);\n      this_1.subscriptions.push(function () {\n        Object.defineProperty(requestModule, glossary_1.IS_PATCHED_MODULE, {\n          value: undefined\n        });\n        requestModule.request = pureRequest;\n        requestModule.get = pureGet;\n        log('native \"%s\" module restored!', protocol);\n      });\n      var options = {\n        emitter: this_1.emitter,\n        log: this_1.log\n      };\n      // @ts-ignore\n      requestModule.request =\n      // Force a line break.\n      http_request_1.request(protocol, options);\n      // @ts-ignore\n      requestModule.get =\n      // Force a line break.\n      http_get_1.get(protocol, options);\n      Object.defineProperty(requestModule, glossary_1.IS_PATCHED_MODULE, {\n        configurable: true,\n        enumerable: true,\n        value: true\n      });\n      log('native \"%s\" module patched!', protocol);\n    };\n    var this_1 = this;\n    try {\n      for (var _b = __values(this.modules), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var _d = __read(_c.value, 2),\n          protocol = _d[0],\n          requestModule = _d[1];\n        _loop_1(protocol, requestModule);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  ClientRequestInterceptor.symbol = Symbol('http');\n  return ClientRequestInterceptor;\n}(Interceptor_1.Interceptor);\nexports.ClientRequestInterceptor = ClientRequestInterceptor;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAcA;;;;AAIA;EAA8CA;EAI5C;IAAA,YACEC,kBAAMC,wBAAwB,CAACC,MAAM,CAAC;IAEtCC,KAAI,CAACC,OAAO,GAAG,IAAIC,GAAG,EAAE;IACxBF,KAAI,CAACC,OAAO,CAACE,GAAG,CAAC,MAAM,EAAEC,cAAI,CAAC;IAC9BJ,KAAI,CAACC,OAAO,CAACE,GAAG,CAAC,OAAO,EAAEE,eAAK,CAAC;;EAClC;EAEUP,wCAAK,GAAf;;IACE,IAAMQ,GAAG,GAAG,IAAI,CAACA,GAAG,CAACC,MAAM,CAAC,OAAO,CAAC;4BAExBC,QAAQ,EAAEC,aAAa;MACzB,IAASC,WAAW,GAAmBD,aAAa,QAAhC;QAAOE,OAAO,GAAKF,aAAa,IAAlB;MAE1CG,sBAAS,CACP,CAACH,aAAa,CAACI,4BAAiB,CAAC,EACjC,mDAAmD,EACnDL,QAAQ,CACT;MAEDM,OAAKC,aAAa,CAACC,IAAI,CAAC;QACtBC,MAAM,CAACC,cAAc,CAACT,aAAa,EAAEI,4BAAiB,EAAE;UACtDM,KAAK,EAAEC;SACR,CAAC;QAEFX,aAAa,CAACY,OAAO,GAAGX,WAAW;QACnCD,aAAa,CAACa,GAAG,GAAGX,OAAO;QAE3BL,GAAG,CAAC,8BAA8B,EAAEE,QAAQ,CAAC;MAC/C,CAAC,CAAC;MAEF,IAAMe,OAAO,GAAsB;QACjCC,OAAO,EAAEV,OAAKU,OAAO;QACrBlB,GAAG,EAAEQ,OAAKR;OACX;MAED;MACAG,aAAa,CAACY,OAAO;MACnB;MACAI,sBAAO,CAACjB,QAAQ,EAAEe,OAAO,CAAC;MAE5B;MACAd,aAAa,CAACa,GAAG;MACf;MACAI,cAAG,CAAClB,QAAQ,EAAEe,OAAO,CAAC;MAExBN,MAAM,CAACC,cAAc,CAACT,aAAa,EAAEI,4BAAiB,EAAE;QACtDc,YAAY,EAAE,IAAI;QAClBC,UAAU,EAAE,IAAI;QAChBT,KAAK,EAAE;OACR,CAAC;MAEFb,GAAG,CAAC,6BAA6B,EAAEE,QAAQ,CAAC;;;;MAzC9C,KAAwC,sBAAI,CAACP,OAAO;QAAzC,4BAAyB;UAAxBO,QAAQ;UAAEC,aAAa;gBAAvBD,QAAQ,EAAEC,aAAa;;;;;;;;;;;;;EA2CrC,CAAC;EAzDMX,+BAAM,GAAG+B,MAAM,CAAC,MAAM,CAAC;EA0DhC,+BAAC;CAAA,CA3D6CC,yBAAW;AAA5CC","names":["__extends","_super","ClientRequestInterceptor","symbol","_this","modules","Map","set","http_1","https_1","log","extend","protocol","requestModule","pureRequest","pureGet","outvariant_1","glossary_1","this_1","subscriptions","push","Object","defineProperty","value","undefined","request","get","options","emitter","http_request_1","http_get_1","configurable","enumerable","Symbol","Interceptor_1","exports"],"sources":["C:\\Users\\Gregory Santosa\\Desktop\\Fall2022HW\\personal\\cse186\\Assignment8\\frontend\\node_modules\\@mswjs\\interceptors\\src\\interceptors\\ClientRequest\\index.ts"],"sourcesContent":["import http from 'http'\nimport https from 'https'\nimport { invariant } from 'outvariant'\nimport { HttpRequestEventMap, IS_PATCHED_MODULE } from '../../glossary'\nimport { Interceptor } from '../../Interceptor'\nimport { AsyncEventEmitter } from '../../utils/AsyncEventEmitter'\nimport { get } from './http.get'\nimport { request } from './http.request'\nimport { NodeClientOptions, Protocol } from './NodeClientRequest'\n\nexport type MaybePatchedModule<Module> = Module & {\n  [IS_PATCHED_MODULE]?: boolean\n}\n\nexport type ClientRequestEmitter = AsyncEventEmitter<HttpRequestEventMap>\n\nexport type ClientRequestModules = Map<\n  Protocol,\n  MaybePatchedModule<typeof http> | MaybePatchedModule<typeof https>\n>\n\n/**\n * Intercept requests made via the `ClientRequest` class.\n * Such requests include `http.get`, `https.request`, etc.\n */\nexport class ClientRequestInterceptor extends Interceptor<HttpRequestEventMap> {\n  static symbol = Symbol('http')\n  private modules: ClientRequestModules\n\n  constructor() {\n    super(ClientRequestInterceptor.symbol)\n\n    this.modules = new Map()\n    this.modules.set('http', http)\n    this.modules.set('https', https)\n  }\n\n  protected setup(): void {\n    const log = this.log.extend('setup')\n\n    for (const [protocol, requestModule] of this.modules) {\n      const { request: pureRequest, get: pureGet } = requestModule\n\n      invariant(\n        !requestModule[IS_PATCHED_MODULE],\n        'Failed to patch the \"%s\" module: already patched.',\n        protocol\n      )\n\n      this.subscriptions.push(() => {\n        Object.defineProperty(requestModule, IS_PATCHED_MODULE, {\n          value: undefined,\n        })\n\n        requestModule.request = pureRequest\n        requestModule.get = pureGet\n\n        log('native \"%s\" module restored!', protocol)\n      })\n\n      const options: NodeClientOptions = {\n        emitter: this.emitter,\n        log: this.log,\n      }\n\n      // @ts-ignore\n      requestModule.request =\n        // Force a line break.\n        request(protocol, options)\n\n      // @ts-ignore\n      requestModule.get =\n        // Force a line break.\n        get(protocol, options)\n\n      Object.defineProperty(requestModule, IS_PATCHED_MODULE, {\n        configurable: true,\n        enumerable: true,\n        value: true,\n      })\n\n      log('native \"%s\" module patched!', protocol)\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}